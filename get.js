javascript:(function(){var whateat=prompt("你要查什麼？");if(!whateat)return alert("請輸入有效的搜尋內容！");var whatstar=parseFloat(prompt("你要幾星以上的(請寫數字)？"))||0;if(isNaN(whatstar)||whatstar<0||whatstar>5)return alert("請輸入有效的星級（0-5）！");if(!window.location.href.includes("google.com/maps")){window.location.href="https://www.google.com/maps";alert("請等待頁面加載後再次運行此書籤！");return}var searchButton=document.querySelector(".JdG3E");if(searchButton){searchButton.click();setTimeout(function(){var searchBox=document.getElementById("ml-searchboxinput");if(!searchBox){alert("搜尋框未載入，請稍後重試！");return}searchBox.value=whateat;searchBox.dispatchEvent(new Event("input"));searchBox.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13}));setTimeout(function(){var scrollableDiv=document.querySelector("div.m6QErb.DxyBCb.kA9KIf.dS8AEf.XiKgde");if(!scrollableDiv){alert("找不到滾動容器！請確認頁面已加載。");return}var maxScrolls=20;var scrollPauseTime=500;var scrollCount=0;function scrollNext(){if(scrollCount<maxScrolls){scrollableDiv.scrollTop=scrollableDiv.scrollHeight;scrollCount++;setTimeout(scrollNext,scrollPauseTime)}else{processResults()}}function processResults(){var results=[];var items=document.querySelectorAll(".Nv2PK.THOPZb");if(items.length===0){alert("找不到店家元素！請確認搜尋結果已加載並滾動頁面。");return}var debugInfo="調試資訊：\n";items.forEach(function(item){var nameElem=item.querySelector(".hfpxzc");var starElem=item.querySelector(".MW4etd");var statusElems=item.querySelectorAll(".W4Efsd .W4Efsd span span span");var button=item.querySelector("button[aria-label]");var name=nameElem?nameElem.getAttribute("aria-label")||"無名稱":"無名稱";var star=starElem?parseFloat(starElem.textContent.trim())||0:0;var status="N/A";if(statusElems.length>0){statusElems.forEach(function(statusEl){var statusText=statusEl.textContent.trim();if(["營業中","即將打烊","已打烊","暫時關閉","即將開始營業"].some(s=>statusText.includes(s))){status=statusText}});};debugInfo+=name+": 評分="+star+", 狀態="+status+", 按鈕="+(button?"存在":"不存在")+"\n";if((["營業中","即將開始營業"].some(s=>status.includes(s)))&&star>whatstar&&button){results.push({name:name,star:star,status:status,button:button})}});if(results.length===0){alert("找不到符合條件的餐廳！找到 "+items.length+" 個元素，但無符合條件者。\n\n"+debugInfo);return}var chosen=null;do{chosen=results[Math.floor(Math.random()*results.length)];alert("抽中：\n"+chosen.name+"\n評分："+chosen.star+"⭐\n狀態："+chosen.status+"\n\n點擊‘確定’重抽，‘取消’跳轉");}while(confirm("要重抽嗎？"));if(chosen.button){chosen.button.click();alert("已點擊按鈕："+chosen.name+"，正在跳轉...")}else{alert("按鈕不可用："+chosen.name+"！請確認頁面狀態。")}}scrollNext()},5000)},1000)}else{setTimeout(function(){var scrollableDiv=document.querySelector("div.m6QErb.DxyBCb.kA9KIf.dS8AEf.XiKgde");if(!scrollableDiv){alert("找不到滾動容器！請確認頁面已加載。");return}var maxScrolls=20;var scrollPauseTime=500;var scrollCount=0;function scrollNext(){if(scrollCount<maxScrolls){scrollableDiv.scrollTop=scrollableDiv.scrollHeight;scrollCount++;setTimeout(scrollNext,scrollPauseTime)}else{processResults()}}function processResults(){var results=[];var items=document.querySelectorAll(".Nv2PK.THOPZb");if(items.length===0){alert("找不到店家元素！請確認已在結果頁並滾動加載。");return}var debugInfo="調試資訊：\n";items.forEach(function(item){var nameElem=item.querySelector(".hfpxzc");var starElem=item.querySelector(".MW4etd");var statusElems=item.querySelectorAll(".W4Efsd .W4Efsd span span span");var button=item.querySelector("button[aria-label]");var name=nameElem?nameElem.getAttribute("aria-label")||"無名稱":"無名稱";var star=starElem?parseFloat(starElem.textContent.trim())||0:0;var status="N/A";if(statusElems.length>0){statusElems.forEach(function(statusEl){var statusText=statusEl.textContent.trim();if(["營業中","即將打烊","已打烊","暫時關閉","即將開始營業"].some(s=>statusText.includes(s))){status=statusText}});};debugInfo+=name+": 評分="+star+", 狀態="+status+", 按鈕="+(button?"存在":"不存在")+"\n";if((["營業中","即將開始營業"].some(s=>status.includes(s)))&&star>whatstar&&button){results.push({name:name,star:star,status:status,button:button})}});if(results.length===0){alert("找不到符合條件的餐廳！找到 "+items.length+" 個元素，但無符合條件者。\n\n"+debugInfo);return}var chosen=null;do{chosen=results[Math.floor(Math.random()*results.length)];alert("抽中：\n"+chosen.name+"\n評分："+chosen.star+"⭐\n狀態："+chosen.status+"\n\n點擊‘確定’重抽，‘取消’跳轉");}while(confirm("要重抽嗎？"));if(chosen.button){chosen.button.click();alert("已點擊按鈕："+chosen.name+"，正在跳轉...")}else{alert("按鈕不可用："+chosen.name+"！請確認頁面狀態。")}}scrollNext()},2000)}})();
